(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{5041:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var r=s(7876),a=s(4232),n=s(8102),l=s(3791);let o={info:(0,r.jsx)(n.$4v,{className:"text-blue-500 text-xl shrink-0"}),warning:(0,r.jsx)(n.jDV,{className:"text-yellow-500 text-xl shrink-0"}),error:(0,r.jsx)(n.XfH,{className:"text-red-500 text-xl shrink-0"}),success:(0,r.jsx)(l.t$n,{className:"text-green-500 text-xl shrink-0"})},c={info:"bg-blue-50 border-blue-300",warning:"bg-yellow-50 border-yellow-300",error:"bg-red-50 border-red-300",success:"bg-green-50 border-green-300"},i={info:"text-blue-800",warning:"text-yellow-800",error:"text-red-800",success:"text-green-800"};function u(e){let{type:t,message:s}=e,a=o[t],n=c[t],l=i[t];return(0,r.jsxs)("div",{className:"flex items-start gap-3 p-4 border ".concat(n),children:[(0,r.jsx)("div",{className:"pt-0.5",children:a}),(0,r.jsx)("p",{className:"text-sm ".concat(l),children:s})]})}let d={type:"success",message:"The backend systems are up. You can now use the platform."},h={type:"warning",message:"It might take a couple of minutes for the backend services to start if they have been inactive for a while. If login doesn't work right away, just give it a moment and try again."},m={type:"error",message:"The backend systems are not reachable. Please try again later or contact the owner of this site."};function x(){let[e,t]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e;let s=async()=>{let s=setTimeout(()=>{t(h)},2e3);try{let r=await fetch("".concat("https://todo-backend-8x1z.onrender.com/health"));clearTimeout(s),200===r.status?(t(d),clearInterval(e)):t(m)}catch(e){clearTimeout(s),t(m)}};return s(),e=setInterval(s,5e3),()=>clearInterval(e)},[]),e)?(0,r.jsx)(u,{type:e.type,message:e.message}):null}},7984:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(9801)}])},9801:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(7876),a=s(9099),n=s(4232),l=s(5041);let o=()=>{(0,n.useEffect)(()=>{document.title="Login | To-Do App"},[]);let[e,t]=(0,n.useState)(""),[s,o]=(0,n.useState)(""),[c,i]=(0,n.useState)(""),u=(0,a.useRouter)(),d=async t=>{try{t.preventDefault();let r=await fetch("".concat("https://todo-backend-8x1z.onrender.com/auth/user","/login")||0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})});if(!r.ok){console.error("Failed to login",r);let e=await r.json();i((null==e?void 0:e.message)||"Failed to login");return}let a=await r.json();localStorage.setItem("access_token",a.access_token),localStorage.setItem("refresh_token",a.refresh_token),u.push("/tasks")}catch(e){console.error("Failed to login",e),i("Failed to login")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl mb-2",children:"Login"}),(0,r.jsx)("span",{className:"text-red-500",children:c}),(0,r.jsxs)("form",{onSubmit:d,className:"flex flex-col items-start gap-4 mt-2",children:[(0,r.jsx)("input",{type:"input",value:e,placeholder:"Username",onChange:e=>t(e.target.value),required:!0,className:"m-0 p-2 border border-gray-300 rounded"}),(0,r.jsx)("input",{type:"password",value:s,placeholder:"Password",onChange:e=>o(e.target.value),required:!0,className:"m-0 p-2 border border-gray-300 rounded"}),(0,r.jsx)("button",{type:"submit",className:"m-0 px-4 py-2 bg-blue-500 text-white rounded cursor-pointer",children:"Submit"}),(0,r.jsxs)("span",{className:"text-sm",children:["Don't have an account? ",(0,r.jsx)("a",{href:"/todo/register",className:"text-blue-500",children:"Register"})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[897,236,636,593,792],()=>t(7984)),_N_E=e.O()}]);