(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{5041:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(7876),r=s(4232),n=s(8102),o=s(3791);let l={info:(0,a.jsx)(n.$4v,{className:"text-blue-500 text-xl shrink-0"}),warning:(0,a.jsx)(n.jDV,{className:"text-yellow-500 text-xl shrink-0"}),error:(0,a.jsx)(n.XfH,{className:"text-red-500 text-xl shrink-0"}),success:(0,a.jsx)(o.t$n,{className:"text-green-500 text-xl shrink-0"})},i={info:"bg-blue-50 border-blue-300",warning:"bg-yellow-50 border-yellow-300",error:"bg-red-50 border-red-300",success:"bg-green-50 border-green-300"},c={info:"text-blue-800",warning:"text-yellow-800",error:"text-red-800",success:"text-green-800"};function d(e){let{type:t,message:s}=e,r=l[t],n=i[t],o=c[t];return(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 border rounded-lg ".concat(n),children:[(0,a.jsx)("div",{className:"pt-0.5",children:r}),(0,a.jsx)("p",{className:"text-sm ".concat(o),children:s})]})}function u(){let[e,t]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e;let s=async()=>{try{let s=await fetch("".concat("https://todo-backend-8x1z.onrender.com/health"));200===s.status?(t({type:"success",message:"The backend systems are up. You can now use the platform."}),clearInterval(e)):t({type:"warning",message:"Please note: it might take a couple of minutes for the backend services to start if they have been inactive for a while. If login doesn't work right away, just give it a moment and try again."})}catch(e){t({type:"warning",message:"Please note: it might take a couple of minutes for the backend services to start if they have been inactive for a while. If login doesn't work right away, just give it a moment and try again."})}};return s(),e=setInterval(s,5e3),()=>clearInterval(e)},[]),e)?(0,a.jsx)(d,{type:e.type,message:e.message}):null}},7984:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(9801)}])},9801:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(7876),r=s(9099),n=s(4232),o=s(5041);let l=()=>{(0,n.useEffect)(()=>{document.title="Login | To-Do App"},[]);let[e,t]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[i,c]=(0,n.useState)(""),d=(0,r.useRouter)(),u=async t=>{try{t.preventDefault();let a=await fetch("".concat("https://todo-backend-8x1z.onrender.com/auth/user","/login")||0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})});if(!a.ok){console.error("Failed to login",a);let e=await a.json();c((null==e?void 0:e.message)||"Failed to login");return}let r=await a.json();localStorage.setItem("access_token",r.access_token),localStorage.setItem("refresh_token",r.refresh_token),d.push("/tasks")}catch(e){console.error("Failed to login",e),c("Failed to login")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl mb-2",children:"Login"}),(0,a.jsx)("span",{className:"text-red-500",children:i}),(0,a.jsxs)("form",{onSubmit:u,className:"flex flex-col items-start gap-4 mt-2",children:[(0,a.jsx)("input",{type:"input",value:e,placeholder:"Username",onChange:e=>t(e.target.value),required:!0,className:"m-0 p-2 border border-gray-300 rounded"}),(0,a.jsx)("input",{type:"password",value:s,placeholder:"Password",onChange:e=>l(e.target.value),required:!0,className:"m-0 p-2 border border-gray-300 rounded"}),(0,a.jsx)("button",{type:"submit",className:"m-0 px-4 py-2 bg-blue-500 text-white rounded cursor-pointer",children:"Submit"}),(0,a.jsxs)("span",{className:"text-sm",children:["Don't have an account? ",(0,a.jsx)("a",{href:"/todo/register",className:"text-blue-500",children:"Register"})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[897,236,636,593,792],()=>t(7984)),_N_E=e.O()}]);