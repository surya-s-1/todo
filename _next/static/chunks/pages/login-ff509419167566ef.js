(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{7984:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(9801)}])},9801:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(7876),r=s(9099),o=s(4232);let l=()=>{(0,o.useEffect)(()=>{document.title="Login | To-Do App"},[]);let[e,t]=(0,o.useState)(""),[s,l]=(0,o.useState)(""),[n,i]=(0,o.useState)(""),c=(0,r.useRouter)(),u=async t=>{try{t.preventDefault();let a=await fetch("".concat("http://localhost:3000/auth/user","/login")||0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})});if(!a.ok){console.error("Failed to login",a);let e=await a.json();i((null==e?void 0:e.message)||"Failed to login");return}let r=await a.json();localStorage.setItem("access_token",r.access_token),localStorage.setItem("refresh_token",r.refresh_token),c.push("/tasks")}catch(e){console.error("Failed to login",e),i("Failed to login")}};return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl mb-2",children:"Login"}),(0,a.jsx)("span",{className:"text-red-500",children:n}),(0,a.jsxs)("form",{onSubmit:u,className:"flex flex-col items-start gap-4 mt-2",children:[(0,a.jsx)("input",{type:"input",value:e,placeholder:"Username",onChange:e=>t(e.target.value),required:!0,className:"m-0 p-2 border border-gray-300 rounded"}),(0,a.jsx)("input",{type:"password",value:s,placeholder:"Password",onChange:e=>l(e.target.value),required:!0,className:"m-0 p-2 border border-gray-300 rounded"}),(0,a.jsx)("button",{type:"submit",className:"m-0 px-4 py-2 bg-blue-500 text-white rounded cursor-pointer",children:"Submit"}),(0,a.jsxs)("span",{className:"text-sm",children:["Don't have an account? ",(0,a.jsx)("a",{href:"/todo/register",className:"text-blue-500",children:"Register"})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7984)),_N_E=e.O()}]);